version: '3.8'

services:
  filesync:
    build: .
    # For production, use the GHCR image:
    # image: ghcr.io/loryanstrant/open-webui-local-filesync:latest
    container_name: openwebui-filesync
    ports:
      - "8000:8000"  # Web interface
    environment:
      # Legacy mode: Configure via environment variables (optional)
      # Leave these commented to use the web interface configuration
      
      # OPENWEBUI_URL: http://openwebui:8080
      # OPENWEBUI_API_KEY: your_api_key_here
      # TZ: UTC
      # SYNC_SCHEDULE: daily
      # SYNC_TIME: "00:00"
      
      # Web interface settings
      WEB_PORT: 8000
      WEB_HOST: 0.0.0.0
    volumes:
      # Mount your local directory containing files to sync
      - ./files:/data:ro
      # Persist configuration and state between container restarts
      - ./config:/app/config
      - ./state:/app/state
    restart: unless-stopped
